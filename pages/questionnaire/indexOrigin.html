<div
  class="questionnaire"
  :style="{ 'background-color': formData.length ? '' : '#FFF'}"
>

  <template v-if="Object.keys(settingsData).length">
    <div class="success">
      <div class="placeholder-image"></div>

      <p class="title">报名成功</p>

      <p class="copywriting">{{ settingsData.copy_writing }}</p>

      <div class="QR-code-container" @click="handlePreviewImage">
        <img :src="settingsData.qr_code_url" />
      </div>
    </div>
  </template>

  <template v-else-if="isShowEmpty">
    <div class="empty">
      <van-empty image="https://p3.ssl.qhimg.com/d/inn/bf8a6ce0c558/placeholder-activity-detail.png">
        <p class="description">问卷不存在</p>
      </van-empty>
    </div>
  </template>

  <template v-else>
    <van-skeleton
      title
      :row="20"
      :loading="!formData.length"
    >

      <div class="form">
        <div class="questionnaire-basic">
          <p class="title">{{ questionnaireName }}</p>
          <p class="describe">根据要求完成下面的问卷，有机会参与产品公测哦~认真填写，通过筛选的概率更大，一起成为产品品鉴官吧！</p>
        </div>

        <!-- 控件类型 start -->
        <div
          class="item"
          v-for="(item, index) in formData"
          :key="item.field_id"
          :class="{ 'other': [6, 7].includes(item.field_type) }"
        >
          <p class="name">
            {{ index + 1 }}. {{ item.name }}<span class="required-mark" v-if="item.required === 1">*</span>
          </p>
          
          <!-- input -->
          <template v-if="item.field_type === 1">
            <input
              type="text"
              v-model.trim="formList[index].value"
              placeholder="请输入"
            />
          </template>
          
          <!-- radio -->
          <template v-if="item.field_type === 3">
            <div class="radio-list">

              <div
                class="radio-item"
                v-for="option in item.options"
                :key="item.field_id + '_' + option"
              >
                <div class="radio-wrapper">
                  <input
                    type="radio"
                    :id="item.field_id + '_' + option"
                    :value="option"
                    v-model="formList[index].value"
                  >
      
                  <i class="radio-icon"></i>
                </div>
                
                <label :for="item.field_id + '_' + option" class="radio-item-label">
                  {{ option }}
                </label>
              </div>
            </div>
          </template>

          <!-- radio + other -->
          <template v-if="item.field_type === 6">
            <div class="radio-list">

              <div
                class="radio-item"
                v-for="option in item.options"
                :key="item.field_id + '_' + option"
              >
                <div class="radio-wrapper">
                  <input
                    type="radio"
                    :id="item.field_id + '_' + option"
                    :value="option"
                    v-model="formList[index].value"
                  >
      
                  <i class="radio-icon"></i>
                </div>

                <label :for="item.field_id + '_' + option" class="radio-item-label">
                  {{ option }}
                </label>
              </div>

              <div class="radio-item">
                <div class="radio-wrapper">
                  <input
                    type="radio"
                    :id="item.field_id + '_other'"
                    :value="null"
                    v-model="formList[index].value"
                  />
                  <i class="radio-icon"></i>
                </div>

                  <label :for="item.field_id + '_other'" class="radio-item-other-label">
                    其他:
                  </label>

                  <input
                    type="text"
                    class="other"
                    v-model.trim="otherStore[item.field_id + '_other']"
                    @focus="otherRadioFocus(index, item)"
                    @input="otherRadioInput(index, item)"
                  />
              </div>
            </div>
          </template>

          <!-- checkbox -->
          <template v-if="item.field_type === 4">
            <div class="checkbox-list">

              <div
                class="checkbox-item"
                v-for="option in item.options"
                :key="item.field_id + '_' + option"
              >
                <div class="checkbox-wrapper">
                  <input
                    type="checkbox"
                    :id="item.field_id + '_' + option"
                    :value="option"
                    v-model="formList[index].value"
                  />
                  <i class="checkbox-icon"></i>
                </div>
      
                <label :for="item.field_id + '_' + option" class="checkbox-item-label">
                  {{ option }}
                </label>
              </div>
            </div>
          </template>

          <!-- checkbox other -->
          <template v-if="item.field_type === 7">
            <div class="checkbox-list">

              <div
                class="checkbox-item"
                v-for="option in item.options"
                :key="item.field_id + '_' + option"
              >
                <div class="checkbox-wrapper">
                  <input
                    type="checkbox"
                    :id="item.field_id + '_' + option"
                    :value="option"
                    v-model="formList[index].value"
                  />
                  <i class="checkbox-icon"></i>
                </div>
      
                <label :for="item.field_id + '_' + option" class="checkbox-item-label">
                  {{ option }}
                </label>
              </div>

              <div class="checkbox-item">
                <div class="checkbox-wrapper">
                  <input
                    type="checkbox"
                    :id="item.field_id + '_other'"
                    :value="null"
                    v-model="formList[index].value"
                  />
                  <i class="checkbox-icon"></i>
                </div>
                
                <label :for="item.field_id + '_other'" class="checkbox-item-other-label">
                  其他:
                </label>

                <input
                  type="text"
                  class="other"
                  v-model.trim="otherStore[item.field_id + '_other']"
                  @focus="otherCheckboxFocus(index, item)"
                  @input="otherCheckboxInput(index, item)"
                />
              </div>
            </div>
          </template>

        </div>
        <!-- 控件类型 end -->

        <template v-if="2 > 3">
          <div class="item">
            <p class="name">
              1.请输入您的邮箱<span class="required-mark">*</span>
            </p>

            <input
              type="text"
              v-model.trim="value1"
              placeholder="请输入"
            />
          </div>

          <div class="item">
            <p class="name">
              2.之前有没有参与过产品的内测或公测？<span class="required-mark">*</span>
            </p>

            <input
              type="text"
              v-model.trim="value2"
              placeholder="请输入"
            />
          </div>

          <div class="item">
            <p class="name">
              3.之前有没有有没有有没有有没有有没有有没有有没有有没有有没有有没有有没有有没有有没有参与过产品的内测或公测？<span class="required-mark">*</span>
            </p>

            <input
              type="text"
              v-model.trim="value3"
              placeholder="请输入"
            />
          </div>

          <div class="item">
            <p class="name">
              4.您目前的状况是<span class="required-mark">*</span>
            </p>

            <div class="radio-list">

              <div class="radio-item">
                <div class="radio-wrapper">
                  <input
                    type="radio"
                    id="radio_1"
                    value="已经确诊"
                    v-model="value4"
                  >

                  <i class="radio-icon"></i>
                </div>
                
                <label for="radio_1" class="radio-item-label">
                  已经确诊
                </label>
              </div>

              <div class="radio-item">
                <div class="radio-wrapper">
                  <input
                    type="radio"
                    id="radio_2"
                    value="出现发热、咳嗽等症状"
                    v-model="value4"
                  >

                  <i class="radio-icon"></i>
                </div>
                
                <label for="radio_2" class="radio-item-label">
                  出现发热、咳嗽等症状
                </label>
              </div>

              <div class="radio-item">
                <div class="radio-wrapper">
                  <input
                    type="radio"
                    id="radio_3"
                    value="无上述症状"
                    v-model="value4"
                  >

                  <i class="radio-icon"></i>
                </div>
                
                <label for="radio_3" class="radio-item-label">
                  无上述症状
                </label>
              </div>

            </div>

          </div>

          <!-- radio other -->
          <div class="item other">
            <p class="name">
              4.您目前的状况是<span class="required-mark">*</span>
            </p>

            <div class="radio-list">

              <div class="radio-item">
                <div class="radio-wrapper">
                  <input
                    type="radio"
                    id="radio_2_1"
                    value="已经确诊"
                    v-model="value4_other"
                  >

                  <i class="radio-icon"></i>
                </div>
                
                <label for="radio_2_1" class="radio-item-label">
                  已经确诊
                </label>
              </div>

              <div class="radio-item">
                <div class="radio-wrapper">
                  <input
                    type="radio"
                    id="radio_2_2"
                    value="出现发热、咳嗽等症状"
                    v-model="value4_other"
                  >

                  <i class="radio-icon"></i>
                </div>
                
                <label for="radio_2_2" class="radio-item-label">
                  出现发热、咳嗽等症状
                </label>
              </div>

              <div class="radio-item">
                <div class="radio-wrapper">
                  <input
                    type="radio"
                    id="radio_2_3"
                    value="无上述症状"
                    v-model="value4_other"
                  >

                  <i class="radio-icon"></i>
                </div>
                
                <label for="radio_2_3" class="radio-item-label">
                  无上述症状
                </label>
              </div>

              <div class="radio-item">
                <div class="radio-wrapper">
                  <input
                    type="radio"
                    value="radio4_other"
                    v-model="value4_other"
                  />
                  <i class="radio-icon"></i>
                </div>
                  <span>其他:</span>
                  <input
                    type="text"
                    class="other"
                    v-model.trim="radio4_other"
                    @focus="otherRadioFocus(index, item)"
                    @input="otherRadioInput(index, item)"
                  />
              </div>

            </div>

          </div>

          <div class="item">
            <p class="name">
              5.您对此次活动最感兴趣的是<span class="required-mark">*</span>
            </p>

            <div class="checkbox-list">

              <div class="checkbox-item">
                <div class="checkbox-wrapper">
                  <input
                    type="checkbox"
                    id="checkbox_1"
                    value="大咖分享"
                    v-model="value5"
                  />
                  <i class="checkbox-icon"></i>
                </div>

                <label for="checkbox_1" class="checkbox-item-label">
                  大咖分享
                </label>
              </div>

              <div class="checkbox-item">
                <div class="checkbox-wrapper">
                  <input
                    type="checkbox"
                    id="checkbox_2"
                    value="最新产品现场演示"
                    v-model="value5"
                  />
                  <i class="checkbox-icon"></i>
                </div>

                <label for="checkbox_2" class="checkbox-item-label">
                  最新产品现场演示
                </label>
              </div>

              <div class="checkbox-item">
                <div class="checkbox-wrapper">
                  <input
                    type="checkbox"
                    id="checkbox_3"
                    value="产品打折活动"
                    v-model="value5"
                  />
                  <i class="checkbox-icon"></i>
                </div>

                <label for="checkbox_3" class="checkbox-item-label">
                  产品打折活动
                </label>
              </div>

            </div>
          </div>

          <!-- checkbox other -->
          <div class="item other">
            <p class="name">
              6.您对此次活动最感兴趣的是<span class="required-mark">*</span>
            </p>

            <div class="checkbox-list">

              <div class="checkbox-item">
                <div class="checkbox-wrapper">
                  <input
                    type="checkbox"
                    id="checkbox_2_1"
                    value="大咖分享"
                    v-model="value6"
                  />
                  <i class="checkbox-icon"></i>
                </div>

                <label for="checkbox_2_1" class="checkbox-item-label">
                  大咖分享
                </label>
              </div>

              <div class="checkbox-item">
                <div class="checkbox-wrapper">
                  <input
                    type="checkbox"
                    id="checkbox_2_2"
                    value="最新产品现场演示"
                    v-model="value6"
                  />
                  <i class="checkbox-icon"></i>
                </div>

                <label for="checkbox_2_2" class="checkbox-item-label">
                  最新产品现场演示
                </label>
              </div>

              <div class="checkbox-item">
                <div class="checkbox-wrapper">
                  <input
                    type="checkbox"
                    id="checkbox_2_3"
                    value="产品打折活动"
                    v-model="value6"
                  />
                  <i class="checkbox-icon"></i>
                </div>

                <label for="checkbox_2_3" class="checkbox-item-label">
                  产品打折活动
                </label>
              </div>

              <div class="checkbox-item">
                <div class="checkbox-wrapper">
                  <input
                    type="checkbox"
                    id="checkbox_2_3"
                    value="{
                      type: 'other',
                      value: 'aaa',
                    }"
                    v-model="value6"
                  />
                  <i class="checkbox-icon"></i>
                </div>
                
                <span>其他:</span>
                <input
                  type="text"
                  class="other"
                  v-model.trim="checkbox6_other"
                />
              </div>

            </div>
          </div>
        </template>

      </div>

      <div class="foot-notation">
        <p>- 360er 产品内测 -</p>
        <p>用户至上 体验为王</p>
      </div>

      <div class="bottom-button">
        <van-button
          class="submit"
          :loading="submitLoading"
          loading-text="提交中..."
          @click="handleSubmit"
        >
          提交
        </van-button>
      </div>

    </van-skeleton>
  </template>
</div>
